<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		div{
			width:200px;
			height:200px;
			background: red;
			position: absolute;
			top:0;
			left:0;
		}
	</style>
	<script>
	window.onload=function(){
		var oDiv=document.getElementById('div1');

		oDiv.onmousedown=function(ev){
			var disX=ev.clientX-oDiv.offsetLeft;
			var disY=ev.clientY-oDiv.offsetTop;
			document.onmousemove=function(ev){
				var left=ev.clientX-disX;
				var top=ev.clientY-disY;

				oDiv.style.left=left+'px';
				oDiv.style.top=top+'px';

				localStorage.left=left;
				localStorage.top=top;
			};
			document.onmouseup=function(){
				document.onmousemove=null;
				document.onmouseup=null;
			};
			return false;
		};

		window.onstorage=function(){
			oDiv.style.left=localStorage.left+'px';
			oDiv.style.top=localStorage.top+'px';
			console.log(1);
		};
	};

	</script>
</head>
<body>
	<div id="div1"></div>
</body>
</html>